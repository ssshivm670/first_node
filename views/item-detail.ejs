<html lang="en">
<%- include('./partials/head.ejs') %>

    <body>
        <%- include('./partials/nav.ejs') %>

            <div class="container">
                <h4>Item details</h4>
                <div>
                    <h5>Item name: <%= item.name%>
                    </h5>
                    <h5>item price: $<%= item.price %>
                    </h5>
                </div>
                <a id="deleteBtn" data-id="<%= item._id %> " href="" class="delete btn">Delete</a>
            </div>
            <script>
                deleteBtn.onclick = function (e) {
                    e.preventDefault();
                    const id = deleteBtn.dataset.id;
                    const endpoint = `/items/${id}`;
                    console.log(endpoint);
                    fetch(endpoint, {
                        method: 'DELETE'
                    }).then((res) => res.json()
                    ).then((data) => window.location.href = data.redirect
                    ).catch((e) => 
                        console.log('e')
                    );
                }
            </script>
            <!--JavaScript at end of body for optimized loading-->
            <!-- Compiled and minified JavaScript -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    </body>

</html>