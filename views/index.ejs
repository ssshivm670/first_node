<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head.ejs') %>

    <body>
        <%- include('./partials/nav.ejs') %>

            <div class="container">
                <ul class="collection with-header">
                    <% if (items.length> 0) { %>
                        <% items.forEach(item=> { %>
                            <li class="collection-item">
                                <a href="/items/<%= item._id%>">
                                    <div>
                                        <%= item.name %> $<%= item.price %>
                                        <a href="#!" class="secondary-content">
                                            <i class="material-icons">delete</i>
                                        </a>
                                        <a href="#edit_item_modal" class="secondary-content modal-trigger">
                                            <i class="material-icons">edit</i>
                                        </a>
                                    </div>
                                </a>
                            </li>
                            <% }) %>

                    <%} else { %>
                        <li class="collection-item">
                            <div>No items founds</div>
                        </li>
                    <%} %>
                </ul>
                <!-- Modal Structure -->
                <div id="edit_item_modal" class="modal">
                    <div class="modal-content">
                        <h4>Edit form</h4>
                        <form action="" id="edit_form" method="post">
                            <input type="text" name="name" placeholder="item name">
                            <input type="number" name="price" placeholder="item price">
                            <button class="btn">Update</button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
                    </div>
                </div>
            </div>

            <!--JavaScript at end of body for optimized loading-->
            <!-- Compiled and minified JavaScript -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    var elems = document.querySelectorAll('.modal');
                    var instances = M.Modal.init(elems);
                });
            </script>
    </body>

</html>